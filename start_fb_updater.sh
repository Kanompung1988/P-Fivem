#!/bin/bash

# Script р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕▒р╕Щр╕гр╕░р╕Ър╕Ъ Facebook Auto-Updater
# р╣Гр╕Кр╣Йр╕кр╕│р╕лр╕гр╕▒р╕Ър╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б Facebook р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤

echo "ЁЯЪА р╣Ар╕гр╕┤р╣Ир╕бр╕гр╕░р╕Ър╕Ъ Facebook Auto-Updater"
echo "===================================="

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕бр╕╡р╣Др╕Яр╕ер╣М .env р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
if [ ! -f .env ]; then
    echo "тЪая╕П  р╣Др╕бр╣Ир╕Юр╕Ър╣Др╕Яр╕ер╣М .env"
    echo "ЁЯУЛ р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М .env р╕Ир╕▓р╕Б .env.example..."
    cp .env.example .env
    echo "тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╣Др╕Яр╕ер╣М .env р╣Бр╕ер╣Йр╕з"
    echo "ЁЯУЭ р╕Бр╕гр╕╕р╕Ур╕▓р╣Бр╕Бр╣Йр╣Др╕В .env р╣Бр╕ер╕░р╣Гр╕кр╣И FB_ACCESS_TOKEN р╕Вр╕нр╕Зр╕Др╕╕р╕У"
    echo ""
fi

# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З dependencies р╕лр╕гр╕╖р╕нр╕вр╕▒р╕З
echo "ЁЯУж р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ dependencies..."
pip install -q -r streamlit_demo/requirements.txt

echo ""
echo "ЁЯФД р╣Ар╕гр╕┤р╣Ир╕бр╕гр╕░р╕Ър╕Ър╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤..."
echo "тД╣я╕П  р╕гр╕░р╕Ър╕Ър╕Ир╕░р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╕р╕Бр╣Ж 60 р╕Щр╕▓р╕Чр╕╡ (р╕Ыр╕гр╕▒р╕Ър╣Др╕Фр╣Йр╕Чр╕╡р╣И .env)"
echo "тД╣я╕П  р╕Бр╕Ф Ctrl+C р╣Ар╕Юр╕╖р╣Ир╕нр╕лр╕вр╕╕р╕Ф"
echo ""

# р╕гр╕▒р╕Щр╕гр╕░р╕Ър╕Ър╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
python facebook_integration/auto_updater.py
